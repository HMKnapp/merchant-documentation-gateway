[#Klarnav2_TransactionTypes_authorizationRenewal]
==== _authorization-renewal_
Use this transaction type to postpone the expiry date of an existing authorization: +
 ``authorization-renewal`` resets the authorization validity period to 28 days (default setting - <<ContactUs, contact Merchant Support>> for changes), starting with the date of the ``authorization-renewal``.

NOTE: Max. authorization validity period limit: +
You cannot renew an authorization to more than 180 days in total. 


////
An authorization is valid by default for 14 days.

After the authorization is expired, it cannot be activated, but can be prolonged using the authorization-renewal transaction.
////

You can only renew authorizations that have not yet been captured/voided.


[#KlarnaV2_TransactionTypes_authorizationRenewal_Fields]
===== _authorization-renewal_ Fields

Fields can be **M**andatory or **O**ptional.

[%autowidth]
[cols="m,,,,"]
|===
|Field |<<APIRef_FieldDefs_Cardinality, M/O>> |Data Type |Size |Description

|merchant-account-id 
|O 
|String 
|36 
|A unique identifier assigned
to every merchant account (by {payment-provider-name}).

|request-id 
|M
|String 
|150 
a|A unique identifier assigned by the merchant
to each request. Used when searching for or referencing it later.

As the request ID must be unique, ``{{$guid}}`` serves as a placeholder; Postman
uses it to generate a random ``request-id`` for testing.

Allowed characters:  ``[a-z0-9-\_]``.

|parent-transaction-id
|M
|String 
|36
|Enter the ``transaction-id`` of the preceding ``authorization`` or ``adjust-authorization``.

|transaction-type 
|M  
|String
|30 
|The requested transaction type. Set this field to `authorization-renewal`.

|requested-amount  
|Response only
|Numeric
|18,3
|Total order amount to be reserved. The number of decimal places depends on the currency. +
The requested amount must be equal to the amount sum of all order items.

Use ``,`` (comma) as separator.

|[[KlarnaV2_TransactionTypes_authorizationRenewal_Fields_requestedAmount_currency]]requested-amount@currency 
|Response only
|String
|3 
a|The <<KlarnaV2_CountriesCurrencies, currency>> of the requested/contested
transaction amount. +
Format: 3-character abbreviation according to ISO 4217.

|order-detail
|Response only
|String
|
|Description of ...

|payment-methods. +
payment-method@name
|O 
|String
|15 
a|The name of the payment method used for the transaction. 

Accepted values: 

  - ``klarna-finance`` for _Klarna_ payment in installments
  - ``klarna-debit`` for _Klarna_ direct debit 
  - ``klarna-transfer`` for _Klarna_ online bank transfer
  - ``klarna-paylater`` for _Klarna_ payment on invoice
//-

|order-number	
|O 
|String
|255 
|Order number of the merchant. +
If set, it shows as "order number" on _Klarna_'s payment confirmation page.

|locale	
|Response only
|String
|5 
|A 5-letter code which indicates what <<KlarnaV2_Locales, language>> the payment page is rendered in (RFC 1766).

|transaction-id 
|Response only
|String
|36
|A unique identifier assigned for every transaction. Generated by {payment-provider-name}. Used when searching for or referencing it later.

|transaction-state 
|Response only
|String
|12
a|Transaction status. +
Possible values: 

  - ``success``
  - ``failed``

//-

|completion-time-stamp
|Response only
|DateTime
|
|The timestamp documents the time and date when the transaction was completed.

|notifications. +
notification-url 
|O 
|String
|256
|The URL to which _{payment-gateway}_ sends an <<GeneralPlatformFeatures_IPN_NotificationExamples, Instant Payment Notification (IPN)>> for pending reservations or the transaction outcome. It overwrites the notification URL that is set up in your merchant configuration.

4+<.>s|account-holder.
s|Contains consumer data.

|date-of-birth 
|O 
|Date 
|
|Consumer's date of birth. +
Format: _Klarna_ accepts only ``dd-MM-YYYY`` or ``YYYY-MM-dd``. + 
If you provide a different format, _Klarna_ prompts the consumer to enter their birth date during the payment process.

|first-name 
|O 
|String
|32 
|Consumer's first name.

|last-name 
|O 
|String
|32 
|Consumer's last name.

|email 
|O 
|String
|64 
|Consumer's email address.

|gender 
|O 
|String
|1 
|Consumer's gender.

|phone 
|O 
|String
|32 
|Consumer's phone number. +
Phone numbers need to be validated. Click <<Klarnav2_phoneNumberValidation, here>> for details.

4+<.>s|account-holder.address.
s|Consumer's address.

|street1 
|O 
|String
|128 
|Street of the consumer's address.

|street2	
|O 
|String
|128 
|House number of the consumer's address.	 

|city 
|O 
|String
|32 
|City of the consumer's address.

|country 
|M 
|String
|3 
|<<KlarnaV2_CountriesCurrencies, Country code>> of the consumer's address.

|postal-code 
|O 
|String
|16 
|Postal/ZIP code of the consumer's address.

include::{root}/include/klarna-payments/fields/klarnaPayments_fields_shipping_followUp.adoc[]


include::{root}/include/klarna-payments/fields/orderItems-responseOnly.adoc[]

4+<.>s|statuses.status.
s|Contains information on the status of a specific transaction.

|code
|Response only
|String
|12
|Transaction status code.

|description
|Response only
|String
|256
|Transaction status message.

|severity
|Response only
|String
|20
a|The definition of the status message. Possible values:

- ``information``
- ``warning``
- ``error``

//-

|@provider-code
|Response only
|String
|34
|Original _Klarna_ error code.

|@provider-message
|Response only|String
|
|Error message to be shown to the consumer as required by _Klarna_.

|@provider-transaction-id 
|Response only
|String
|36
|_Klarna_ reservation number.

4+<.>s|additional-provider-data.provider-data
s|Contains max. 1 additional data item for _Klarna_.

|request
|O
|String
|
|Content should be an object containing any of the keys and sub objects described in https://developers.klarna.com/api/#payments-api-create-a-new-credit-session serialised to JSON. +
E.g. +
 ``{"marketplace_seller_info":[{"product_category":"Women''s Fashion","product_name":"Women Sweatshirt"}]}`` +

|===

[#KlarnaV2_TransactionTypes_authorizationRenewal_Samples]
===== _authorization-renewal_ Samples

._authorization-renewal_ Request
[source,xml,subs=attributes+]
----
include::{root}/samples/xml/Klarnav2_authorizationRenewal_request.xml[]
----

._authorization-renewal_ Response
[source,xml,subs=attributes+]
----
include::{root}/samples/xml/Klarnav2_authorizationRenewal_response.xml[]
----

//-