[#KlarnaV2_TransactionTypes_adjustCapture]
==== _adjust-capture_

Use this transaction type to update/add an existing capture`s shipping/tracking information.

To refer to a specific _capture-authorization_, you need the ``parent-transaction-id``, which is the ``transaction-id`` of the preceding _capture-authorization_.

[#KlarnaV2_TransactionTypes_AdjustCapture_Workflow]
===== _adjust-capture_ Workflow

[mermaid,Klarnav2_workflow_captureAuthorization,svg,subs=attributes+]
----
sequenceDiagram
    participant M as Merchant
    participant W as WPG
    participant K as Klarna
M-->>M: updates shipping info
M->>W: sends "adjust-capture" request
W->>K: creates and sends "adjust-capture"
K-->>K: updates shipping info
K->>W: sends shipping update response
W->>M: sends "adjust-capture" response
M-->>M: processes response
----

. -> Send an _adjust-capture_ request. This request must contain the ``parent-transaction-id``. Enter the ``transaction-id`` of the preceding _capture-authorization_ response.
. _{payment-gateway}_ forwards the request to _Klarna_. 
. _Klarna_ returns the update result.
. _{payment-gateway}_ sends you the _adjust-capture_ response which contains the status code.
. -> Process the _adjust-capture_ response.

//-

[#KlarnaV2_TransactionTypes_adjustCapture_Fields]
===== _adjust-capture_ Fields

Fields can be **M**andatory or **O**ptional.

[%autowidth, stripes=none]
[cols="m,,,,a"]
|===
|Field |<<APIRef_FieldDefs_Cardinality, M/O>> |Data Type |Size |Description

|merchant-account-id 
|O
|String 
|36 
|A unique identifier assigned to every merchant account (by {payment-provider-name}).

|request-id 
|M
|String 
|150 
|A unique identifier assigned by the merchant
to each request. Used when searching for or referencing it later.

As the request ID must be unique, ``{{$guid}}`` serves as a placeholder; Postman
uses it to generate a random ``request-id`` for testing.

Allowed characters:  ``[a-z0-9-\_]``.

|parent-transaction-id
|M
|String 
|36
|Enter the ``transaction-id`` of the preceding ``capture-authorization``.

|transaction-type 
|M 
|String
|30 
|The requested transaction type. Set this field to `adjust-capture`.

|requested-amount  
|Response only
|Numeric
|18,3
|The new order amount to be reserved. The number of decimal places depends on the currency.

|[[KlarnaV2_TransactionTypes_adjustCapture_Fields_requestedAmount_currency]]requested-amount@currency 
|Response only
|String
|3 
|Currency of ``requested-amount``.

|order-detail
|Response only
|String
|
|Detailed description of the (reason for the) update/change of shipping information.

|locale	
|Response only
|String
|5 
|A 5-letter code that indicates what <<KlarnaV2_Locales, language>> the payment page is rendered in (RFC 1766).

|transaction-id 
|Response only
|String
|36
|A unique identifier assigned for every transaction. Generated by {payment-provider-name}. Used when searching for or referencing it later.

|transaction-state 
|Response only
|String
|12
|Transaction status. +
Possible values: 

  - ``success``
  - ``failed``
//-

|completion-time-stamp
|Response only
|DateTime
|
|The timestamp documents the time and date when the transaction was completed.

include::{root}/include/klarna-payments/fields/klarnaPayments_fields_paymentMethod.adoc[tags=**;!recurring;!adjust-authorization;!initialAuthorization]

include::{root}/include/klarna-payments/fields/klarnaPayments_fields_notifications.adoc[]

include::{root}/include/klarna-payments/fields/klarnaPayments_fields_accountHolder_responseOnly.adoc[]

include::{root}/include/klarna-payments/fields/klarnaPayments_fields_accountHolderAddress_responseOnly.adoc[]

include::{root}/include/klarna-payments/fields/klarnaPayments_fields_shipping_followUp.adoc[tags=**]

[#KlarnaV2_TransactionTypes_adjustCapture_Fields_orderItems]
include::{root}/include/klarna-payments/fields/orderItems-responseOnly.adoc[]

include::{root}/include/klarna-payments/fields/klarnaPayments_fields_status.adoc[]
|===


[#KlarnaV2_TransactionTypes_adjustAuthorization_Samples]
===== _adjust-authorization_ Samples

._adjust-authorization_ Request
[source,xml,subs=attributes+]
----
include::{root}/samples/xml/Klarnav2_adjustAuthorization_request.xml[]
----

._adjust-authorization_ Response
[source,xml,subs=attributes+]
----
include::{root}/samples/xml/Klarnav2_adjustAuthorization_response.xml[]
----

//-