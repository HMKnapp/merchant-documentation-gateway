[##WPP_paylib]
===== Paylib

[##WPP_paylib_General]
====== General Information

This is a reference page for _Paylib_. Here you find all the
information necessary for integrating this payment method into
your Hosted and Embedded Payment Page.

.Are you unfamiliar with Wirecard Payment Page (WPP)?

NOTE: Visit one of the integration guides
(<<PaymentPageSolutions_PPv2_HPP_Integration, Hosted>>,
<<PaymentPageSolutions_PPv2_EPP_Integration, Embedded>>) for a quick explanation and
a step-by-step guide before continuing.

All <<PPv2, WPP>> integrations share a
<<PPSolutions_WPP_Workflow, common process flow>>﻿ for creating payments.

Below, you find an example request for the available transaction types 
_purchase_ and _authorization_, including field lists with short descriptions.

NOTE: You need to complete these requests with your production credentials.
You receive your credentials with your Wirecard contract. If you
need your production credentials, contact <<ContactUs, merchant support>>.

|===
|Testing _Paylib_

_Paylib_ does not offer a payment testing sandbox.
You need to test transactions with your production credentials.
|===

For more details on the ``redirect-url``, see the 
<<PPSolutions_WPP_ConfigureRedirects, Configuring Redirects and IPNs for WPP>>﻿﻿ 
section.

For response verification examples, see
the <<PPSolutions_WPP_WPPSecurity, WPP Security>>﻿ section.

[##WPP_paylib_About]
====== About _Paylib_

image::images\03-01-04-06b-paylib/paylib_logo.png[paylib logo, 200]

_Paylib_ is a French mobile wallet initiated by a collaboration of major French banks. By linking a credit card to their account, _Paylib_ allows consumers to make purchases without having to re-enter their card details. To pay, consumers have to enter their username, password and a code generated by the _Paylib_ app.

[##WPP_paylib_TestCredentials]
====== Test Credentials

Test credentials for transaction types <<WPP_paylib_TransactionType_debitauth, _debit_>> and <<WPP_paylib_TransactionType_debitauth, _authorization_>>.

[cols="35h,65"]
|===
| URL (Endpoint)
|``\https://wpp-test.wirecard.com/api/payment/register``
| Merchant Account ID (MAID)
| d79cbe98-cb2c-4882-a16e-47eaeb99ad44
| Username
| 70000-APITEST-AP
| Password
| qD2wzQ_hrc!8
| Secret Key (used for response verification)
| Please <<ContactUs, contact merchant support>> for complete test credentials.
|===

[#WPP_paysafecard_TestCredentials_Additional]
.Test Credentials on _Paylib_ side

[cols="20h,80"]
|===
| User Name | psp-wirecard@wl.net
| Password | password
|===

[##WPP_paylib_Countries]
====== Countries and Currencies

This table illustrates which payment mode _Paylib_ belongs to. It also
provides detailed information about the countries and currencies which
are relevant for _Paylib_.

[%autowidth]
|===
| Payment Mode | <<PaymentMethods_PaymentMode_Wallet, Wallet>>
| Countries    | France
| Currencies   | EUR
|===

[##WPP_paylib_TransactionTypes]
====== Transaction Types

_Paylib_ can be used with the transaction types <<WPP_paylib_TransactionType_debitauth, _debit_>> and <<WPP_paylib_TransactionType_debitauth, _authorization_>>.

We provide JSON examples for each step of this process. You can find
them below. You need to adapt the field values to your system.

.Request Headers
[cols="20h,80"]
|===
| Authorization
| needs to be formatted as: "Authorization"="Basic"  +
base64 (“username:password”). Use username and password as given in your
Wirecard contract to base64 encode the authorization.
| Content-Type
| application/json
|===


[#WPP_paylib_TransactionType_debitauth]
====== Transaction Type _debit_ or _authorization_

You can use the following sample for both transaction types. Please enter the desired value for ``transaction-type``.

[source,json]
----
{
    "payment":{ 
        "merchant-account-id" : {
            "value" : "d79cbe98-cb2c-4882-a16e-47eaeb99ad44"
        },
        "request-id":"{{$guid}}",
        "transaction-type":"debit",
        "requested-amount":{ 
            "value":10.1,
            "currency":"EUR"
        },
        "payment-methods":{ 
            "payment-method":[ 
                { 
                   "name":"paylib"
                }
            ]
        },
        "account-holder": {
	      "first-name": "Wing",
	      "last-name": "Wu",
	      "email": "wiwu@example.com"
	    },
        "success-redirect-url": "https://demoshop-test.wirecard.com/demoshop/#/success",
        "cancel-redirect-url": "https://demoshop-test.wirecard.com/demoshop/#/cancel",
        "fail-redirect-url": "https://demoshop-test.wirecard.com/demoshop/#/error"
    }
}
----

[cols="15e,5,5,5,5,5,60"]
|===
3+|Field (JSON) |Data Type |Cardinality |Size |Description

2+|merchant-account-id e|value |String |required |36 |A unique identifier
assigned to every merchant account (by Wirecard). You receive a unique
merchant account ID for each payment method.
3+|request-id |String |required |64 a|A unique identifier assigned by the
merchant to each request. Used when searching for or referencing it later.

You may enter any request ID that has never been used before.

As the request ID must be unique, ``{{$guid}}`` serves as a placeholder; e.g.
Postman uses it to generate a random ``request-id`` for testing.

Allowed characters: [a-zA-Z0-9-_]

//-

3+|transaction-type |String |required |n/a a|The requested transaction type.

Available transaction types for _Paylib_:

- _debit_
- _authorization_

//-

.2+|requested-amount  2+e|value |Numeric |required |9.2 |The full amount that is
requested/contested in a transaction. 2 decimals digits allowed.
2+|currency |String |required |3 a|The currency of the requested/contested
transaction amount. For _Paylib_ payments, the currency must be set to ``EUR``.

Format: 3-character abbreviation according to ISO 4217.
|payment-methods e|payment-method e|name |String |required |256 |The name of the
payment method used for the transaction, i.e. ``Paylib``.
2.3+|account-holder e|first-name |String |optional |32 |The first name of the account holder.
e|last-name |String |optional |32 |The last name of the account holder.
e|email |String |optional |256 ??? |The email address of the account holder.
3+|success-redirect-url |String |required |2000 a|The URL to which the consumer
is redirected after a successful payment,
e.g. ``\https://demoshop-test.wirecard.com/demoshop/#/success``
3+|cancel-redirect-url |String |required |2000 a|The URL to which the consumer
is redirected after having canceled a payment,
e.g. ``\https://demoshop-test.wirecard.com/demoshop/#/cancel``
3+|fail-redirect-url |String |required |2000 a|The URL to which the consumer
is redirected after an unsuccessful payment,
e.g. ``\https://demoshop-test.wirecard.com/demoshop/#/error``
|===

[##WPP_paylib_TransactionType_purchase_Redirect]
.2. Redirect the Consumer to the Payment Page (Sample Response URL)

[source,json]
----
{
    "payment-redirect-url": "https://wpp-test.wirecard.com/processing?wPaymentToken=CZByqrqTROlwiGN-lEODd-upp9B2-2n__f31qI8mA-g"
}
----

. Use the URL you receive in the response (Don't use the one above).
. Initiate the payment process.
. Enter _User Name_ on _Paylib_ side.
. Validate your entry.
. Enter _Password_ on _Paylib_ side.
. Validate your entry.
. Use the provided credit card number.
. Send your payment.

//-
